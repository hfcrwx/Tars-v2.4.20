# protobuf Support

## Tars supports protobuf service description file

If you know about tars, many of your existing businesses have adopted protobuf protocol; if you want to migrate these businesses to tars, you need to manually translate proto files into tars files, which is very troublesome and error prone. Now, tars uses the plug-in mechanism of protoc, which provides direct support for proto files, and can generate tar RPC related code, making migration smooth and easy.

### Usage method

#### 1. prepare proto

There are no restrictions on the syntax of proto files. You can use proto 2 or proto 3. But please note that ï¼Œyou must add**option cc\_generic\_services=false;** 

Because our goal is not to use the Pb RPC interface generated by protoc, but to use the tar plug-in to take over and generate an RPC interface that conforms to the tar framework. An example of a proto file is as follows:

```text
syntax = "proto2";

option cc_generic_services=false;

package TestApp;

message PbRequest {
    required int32 a = 1;
    required int32 b = 2;
}

message PbResponse { 
    required int32 c = 1;
}  

service Hello {
    rpc add(PbRequest) returns (PbResponse) {
    }
}
```

#### 2. make 

Because the statements that call the tars pb plug-in are already built into the framework makefile.tars file. Since the file name generated by protoc by default has the suffix.pb.h, the tars plug-in also follows this naming rule. The generated file suffix is .tars.h


